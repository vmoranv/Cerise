time:
  timezone: "UTC"        # IANA timezone, e.g. Asia/Shanghai
  timestamp_format: "%Y-%m-%d %H:%M"

store:
  backend: sqlite         # sqlite | state | memory
  sqlite_path: ""         # empty = ~/.cerise/memory/memory.db
  state_path: ""          # empty = ~/.cerise/memory/state.json
  ttl_seconds: 86400
  max_records_per_session: 200

l1_core:
  enabled: true
  backend: sqlite         # sqlite | state | memory
  sqlite_path: ""         # empty = ~/.cerise/memory/l1_core.db
  state_path: ""          # empty = ~/.cerise/memory/l1_core.json
  max_records: 200

l2_semantic:
  enabled: true
  backend: sqlite         # sqlite | state | memory
  sqlite_path: ""         # empty = ~/.cerise/memory/l2_semantic.db
  state_path: ""          # empty = ~/.cerise/memory/l2_semantic.json
  max_records: 200

l4_procedural:
  enabled: true
  backend: sqlite         # sqlite | state | memory
  sqlite_path: ""         # empty = ~/.cerise/memory/l4_procedural.db
  state_path: ""          # empty = ~/.cerise/memory/l4_procedural.json
  max_records: 200

sparse:
  enabled: true
  top_k: 5

vector:
  enabled: true
  provider: faiss         # faiss | chroma | numpy
  embedding_backend: hash # hash | provider
  embedding_dim: 256
  embedding_provider: ""  # provider id from providers.yaml
  embedding_model: ""     # optional override
  top_k: 5
  persist_path: ""        # empty = ~/.cerise/memory/vectors

kg:
  enabled: true
  top_k: 3
  auto_extract: true

compression:
  enabled: true
  threshold: 80
  window: 40
  max_chars: 1000
  summary_provider_id: ""  # optional provider id for LLM summaries
  summary_model: ""
  summary_temperature: 0.2
  summary_max_tokens: 400

context:
  enabled: true
  max_items: 12
  layer_weights:
    core: 1.0
    semantic: 1.0
    procedural: 1.0
    episodic: 2.0
  max_per_layer: {}
  include_tags: true
  include_category: true
  include_emotion: true
  include_scores: false

scoring:
  recency_half_life_seconds: 1800
  recency_weight: 1.0
  importance_weight: 0.15
  emotional_weight: 0.1
  reinforcement_weight: 0.05
  max_access_count: 20
  emotion_filter_enabled: false
  emotion_min_intensity: 0.2

pipeline:
  extractor: rule          # rule | llm | composite
  llm_provider_id: ""      # provider id for extraction
  llm_model: ""
  llm_temperature: 0.2
  llm_max_tokens: 800
  emotion_on_ingest: true
  task_type_mapping: {}

dreaming:
  enabled: false
  max_records: 200
  decay_half_life_seconds: 86400
  min_importance: 0.1
  prune_score_threshold: 0.05

recall:
  enabled: true
  top_k: 8
  min_score: 0.05
  rrf_k: 60
  touch_on_recall: true
  random_enabled: false
  random_k: 1
  random_probability: 0.1
  trigger_keywords: ["random", "surprise"]

rerank:
  enabled: true
  top_k: 8
  weight: 0.35
  provider_id: ""  # optional rerank provider id
  model: ""

association:
  enabled: true
  max_hops: 1
  top_k: 5
  max_entities: 12
  include_facts: true
  expand_from_query: true
  expand_from_results: true
  min_score: 0.02
